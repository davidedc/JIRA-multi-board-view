<html>
<body>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.7.1/coffee-script.min.js"></script>


<script type="text/coffeescript">

$.ajax
	type: 'GET',
	url: './search/something.json',
	dataType: 'jsonp',
	success: (responseObject) ->
		# debugger;
		console.log JSON.stringify responseObject

		# We are going to show the equivalent of a JIRA
		# board. Just like JIRA boards, each column can
		# group several statuses, so we model that here.
		groupedStatuses = [
			["Open"], # column 1
			["Prioritised"], # column 2
			["In Development"], # ...
			["In Testing"],
			["Fix soon"],
			["Resolved", "Closed"]
		]

		# add the header in each column, in bold
		# telling which statuses are grouped in it
		groupNumber = 0
		for statusGroup in groupedStatuses
			groupNumber++
			header = ""
			for eachStatus in statusGroup
				header = header + eachStatus + " "
			$( "#column" + groupNumber ).append( "<b>" + header + "<b>" )

		# now add the issues in each column.
		# for each result scan which group it
		# belongs to, according to status, and
		# place in the correct column.
		# Probably not the most efficient way
		# but it's not like we need to place hundreds
		# of issues here, so it's OK
		for i in responseObject.result
			console.log i

			groupNumber = 0
			for statusGroup in groupedStatuses
				groupNumber++
				if i[3] in statusGroup
					# the javascript is just to have the issue details to open
					# in a dedicated div to the right, cause the tiles are
					# probably gonna get real small as we fit more boards
					# in the page
					$( "#column" + groupNumber ).append( "<div onmouseover=\"$('#details').text( $(this).text() );\" >"  + i[1] + ": " + i[2] + "</div> <hr>" )



</script>

<div id="column1"  style="float: left; width:100px"> </div>
<div id="column2"  style="float: left; width:100px"> </div>
<div id="column3"  style="float: left; width:100px"> </div>
<div id="column4"  style="float: left; width:100px"> </div>
<div id="column5"  style="float: left; width:100px"> </div>
<div id="column6"  style="float: left; width:100px"> </div>
<div id="column7"  style="float: left; width:100px"> </div>
<div id="column8"  style="float: left; width:100px"> </div>
<div id="column9"  style="float: left; width:100px"> </div>
<div id="column10" style="float: left; width:100px"> </div>

<div id="details" style="float: left; width:100px"> </div>

</body>
</html>
